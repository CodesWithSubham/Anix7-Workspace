(()=>{var e={};e.id=3853,e.ids=[3853],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},13440:e=>{"use strict";e.exports=require("util/types")},15946:()=>{},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},41204:e=>{"use strict";e.exports=require("string_decoder")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54287:e=>{"use strict";e.exports=require("console")},55511:e=>{"use strict";e.exports=require("crypto")},55698:()=>{},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},86521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>U,routeModule:()=>v,serverHooks:()=>j,workAsyncStorage:()=>k,workUnitAsyncStorage:()=>q});var a={};r.r(a),r.d(a,{POST:()=>b});var s=r(53358),n=r(24967),o=r(47614),i=r(88980),l=r(69066),c=r(55511),u=r(6309);function d(e){return function(t){if(!t.token.startsWith("vercel_blob_client_"))throw new l.K4(`${e} must be called with a client token`);if(void 0!==t.addRandomSuffix||void 0!==t.cacheControlMaxAge)throw new l.K4(`${e} doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens.`)}}async function p(e){return globalThis.crypto.subtle.importKey("raw",new TextEncoder().encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"])}async function m(e,t){if(!globalThis.crypto)return c.createHmac("sha256",t).update(e).digest("hex");let r=await globalThis.crypto.subtle.sign("HMAC",await p(t),new TextEncoder().encode(e));return Buffer.from(new Uint8Array(r)).toString("hex")}async function f({token:e,signature:t,body:r}){if(!globalThis.crypto){let a=c.createHmac("sha256",e).update(r).digest("hex"),s=Buffer.from(a),n=Buffer.from(t);return s.length===n.length&&c.timingSafeEqual(s,n)}return await globalThis.crypto.subtle.verify("HMAC",await p(e),function(e){if(e.length%2!=0)throw RangeError("Expected string to be an even number of characters");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substring(r,r+2),16);return Buffer.from(t)}(t),new TextEncoder().encode(r))}(0,l.lz)({allowedOptions:["contentType"],extraChecks:d("client/`put`")}),(0,l.FB)({allowedOptions:["contentType"],extraChecks:d("client/`createMultipartUpload`")}),(0,l.MX)({allowedOptions:["contentType"],extraChecks:d("client/`createMultipartUpload`")}),(0,l.qk)({allowedOptions:["contentType"],extraChecks:d("client/`multipartUpload`")}),(0,l.GT)({allowedOptions:["contentType"],extraChecks:d("client/`completeMultipartUpload`")}),(0,l.lz)({allowedOptions:["contentType"],extraChecks(e){if(void 0===e.handleUploadUrl)throw new l.K4("client/`upload` requires the 'handleUploadUrl' parameter");if(void 0!==e.addRandomSuffix||void 0!==e.cacheControlMaxAge)throw new l.K4("client/`upload` doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens.")},async getToken(e,t){var r,a;return g({handleUploadUrl:t.handleUploadUrl,pathname:e,clientPayload:null!=(r=t.clientPayload)?r:null,multipart:null!=(a=t.multipart)&&a})}});var h={generateClientToken:"blob.generate-client-token"};async function w({token:e,request:t,body:r,onBeforeGenerateToken:a,onUploadCompleted:s}){var n,o,i,c;let u=(0,l.o4)({token:e}),d=r.type;switch(d){case"blob.generate-client-token":{let{pathname:e,callbackUrl:t,clientPayload:s,multipart:i}=r.payload,l=await a(e,s,i),c=null!=(n=l.tokenPayload)?n:s,p=new Date,m=null!=(o=l.validUntil)?o:p.setSeconds(p.getSeconds()+3600);return{type:d,clientToken:await y({...l,token:u,pathname:e,onUploadCompleted:{callbackUrl:t,tokenPayload:c},validUntil:m})}}case"blob.upload-completed":{let e="x-vercel-signature",a="credentials"in t?null!=(i=t.headers.get(e))?i:"":null!=(c=t.headers[e])?c:"";if(!a)throw new l.K4("Missing callback signature");if(!await f({token:u,signature:a,body:JSON.stringify(r)}))throw new l.K4("Invalid callback signature");return await s(r.payload),{type:d,response:"ok"}}default:throw new l.K4("Invalid event type")}}async function g(e){let{handleUploadUrl:t,pathname:r}=e,a=!function(e){try{return new URL(e),!0}catch(e){return!1}}(t)?new URL(t,location.href).href:t,s={type:h.generateClientToken,payload:{pathname:r,callbackUrl:a,clientPayload:e.clientPayload,multipart:e.multipart}},n=await (0,u.hd)(a,{method:"POST",body:JSON.stringify(s),headers:{"content-type":"application/json"},signal:e.abortSignal});if(!n.ok)throw new l.K4("Failed to  retrieve the client token");try{let{clientToken:e}=await n.json();return e}catch(e){throw new l.K4("Failed to retrieve the client token")}}async function y({token:e,...t}){var r;if("undefined"!=typeof window)throw new l.K4('"generateClientTokenFromReadWriteToken" must be called from a server environment');let a=new Date;a.setSeconds(a.getSeconds()+30);let s=(0,l.o4)({token:e}),[,,,n=null]=s.split("_");if(!n)throw new l.K4(e?"Invalid `token` parameter":"Invalid `BLOB_READ_WRITE_TOKEN`");let o=Buffer.from(JSON.stringify({...t,validUntil:null!=(r=t.validUntil)?r:a.getTime()})).toString("base64"),i=await m(o,s);if(!i)throw new l.K4("Unable to sign client token");return`vercel_blob_client_${n}_${Buffer.from(`${i}.${o}`).toString("base64")}`}var x=r(8527);async function b(e){try{let t=await e.json(),r=await (0,i.j2)(),a=await w({body:t,request:e,onBeforeGenerateToken:async e=>{if(!r)throw Error("Unauthorized");return{allowedContentTypes:["image/jpeg","image/jpg","image/png","image/gif","image/apng","image/tiff"],maximumSizeInBytes:0xa00000}}});return x.NextResponse.json(a)}catch(e){if("Unauthorized"===e.message)return x.NextResponse.json({error:e.message},{status:401});return console.error("Error during blob upload:",e),x.NextResponse.json({error:e.message},{status:500})}}let v=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/tools/ImageIndex/upload/blob/route",pathname:"/api/tools/ImageIndex/upload/blob",filename:"route",bundlePath:"app/api/tools/ImageIndex/upload/blob/route"},resolvedPagePath:"C:\\Users\\subha\\Projects\\Anix7 Workspace\\apps\\tools\\app\\api\\tools\\ImageIndex\\upload\\blob\\route.js",nextConfigOutput:"",userland:a}),{workAsyncStorage:k,workUnitAsyncStorage:q,serverHooks:j}=v;function U(){return(0,o.patchFetch)({workAsyncStorage:k,workUnitAsyncStorage:q})}},88980:(e,t,r)=>{"use strict";r.d(t,{fG:()=>h,LO:()=>w,j2:()=>g});var a=r(50378),s=r(24613),n=r(15566),o=r(92430),i=r(25348);let l=process.env.AUTH_SECRET,c=process.env.BASE_URL,u=process.env.OWNER_EMAIL,d=["subhamduary11@gmail.com","no-reply.tools@anix7.in","contact.tools@anix7.in","contactme5950@gmail.com"];async function p(e){try{let t=await fetch(`${c}/api/admin/FromAuthjs/getUserByEmail`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!t.ok){let e=await t.json();throw console.error("Error:",e.message),Error("Failed to fetch user")}return(await t.json()).user||null}catch(e){throw console.error("Network error in getUserFromDb:",e),Error("Server error")}}async function m(e){try{let t=await fetch(`${c}/api/admin/FromAuthjs/createUser`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({userDetails:e})});if(!t.ok){let e=await t.json();return console.error("Error:",e.message),!1}return!0}catch(e){return console.error("Network error in createUser:",e),!1}}let f={pages:{signIn:"/"},providers:[(0,a.A)({name:"Credentials",id:"credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e)return null;try{let{email:t,password:r}=await o.a.parseAsync(e),a=await p(t);if(!a||!await (0,n.UD)(r,a.password))return null;let{userId:s,firstName:i,lastName:l,isVerified:c,profilePic:u,balance:d,referredBy:m}=a;return{userId:s,email:t,firstName:i,lastName:l,isVerified:c,profilePic:u,balance:d,referredBy:m}}catch(e){return null}}}),(0,s.A)({authorization:{params:{prompt:"consent",access_type:"offline",response_type:"code"}}})],callbacks:{async signIn({user:e,account:t,profile:r}){try{if("google"===t.provider){if(!e?.email)return!1;if(!await p(e.email)){let t=await (0,i.UL)(),a=t.get("referral_id")?.value||null;return await m({firstName:e.name,lastName:null,email:e.email,isVerified:r?.email_verified||!1,profilePic:e.image,referredBy:a})}}return!0}catch(e){return console.error("Unexpected error in signIn callback:",e),!1}},async jwt({token:e,user:t,account:r,profile:a}){if(t&&r){var s;let a=t.userId?t:await p(e.email);e.userId=a?.userId,e.firstName=a?.firstName,e.lastName=a?.lastName,e.isVerified=a?.isVerified,e.profilePic=a?.profilePic,e.balance=a?.balance,e.referredBy=a?.referredBy,e.loggedBy=r?.provider,e.role=(s=a.email)===u?"owner":d.includes(s)?"admin":"user"}return e},session:({session:e,token:t})=>(t&&(e.user.userId=t.userId,e.user.firstName=t.firstName,e.user.lastName=t.lastName,e.user.isVerified=t.isVerified,e.user.profilePic=t.profilePic,e.loggedBy=t.loggedBy,e.user.role=t.role),e)}},{handlers:{GET:h,POST:w},auth:g,signIn:y,signOut:x}=(0,r(83010).Ay)({session:{strategy:"jwt"},...f})},91645:e=>{"use strict";e.exports=require("net")},92430:(e,t,r)=>{"use strict";r.d(t,{O:()=>n,a:()=>s});var a=r(31825);let s=(0,a.Ik)({email:(0,a.Yj)().email("Invalid email address.").transform(e=>e.toLowerCase().replace(/\+.*(?=@)/,"")),password:(0,a.Yj)().min(1,"Password is required").max(32,"Entered password is too long")}),n=(0,a.Ik)({firstName:(0,a.Yj)().min(1,"First name is required.").max(48,"First name must be less than 48 characters."),lastName:(0,a.Yj)().max(48,"Last name must be less than 48 characters.").optional(),email:(0,a.Yj)().email("Invalid email address.").transform(e=>e.toLowerCase().replace(/\+.*(?=@)/,"")),password:(0,a.Yj)().min(1,"Please enter a password.").min(8,"Password must be at least 8 characters long.").max(32,"Password must be less than 32 characters long.").regex(/[A-Z]/,"Password must contain at least one uppercase letter.").regex(/[a-z]/,"Password must contain at least one lowercase letter.").regex(/\d/,"Password must contain at least one number.").regex(/[!@#$%^&*(),.?":{}|<>]/,"Password must contain at least one special character."),confirmPassword:(0,a.Yj)(),isVerified:(0,a.zM)().optional().default(!1),profilePic:(0,a.Yj)().url("Invalid URL.").optional().nullable(),balance:(0,a.ai)().optional().default(0),referredBy:(0,a.Yj)().optional().nullable()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]})},94175:e=>{"use strict";e.exports=require("stream/web")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7614,3532,7929,7792,4608,5646,9066],()=>r(86521));module.exports=a})();