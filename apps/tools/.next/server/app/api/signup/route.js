"use strict";(()=>{var e={};e.id=2722,e.ids=[2722],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{e.exports=require("dns")},21820:e=>{e.exports=require("os")},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},56037:e=>{e.exports=require("mongoose")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64463:(e,r,t)=>{t.d(r,{J:()=>o});var s=t(54155),a=t(9913);async function o(e=10){let r,t=!0,n=Math.pow(10,e-1),i=Math.pow(10,e)-1;for(await (0,a.A)();t;)r=Math.floor(n+Math.random()*(i-n)),t=await s.A.exists({userId:r});return r}},74075:e=>{e.exports=require("zlib")},79551:e=>{e.exports=require("url")},79646:e=>{e.exports=require("child_process")},81630:e=>{e.exports=require("http")},91645:e=>{e.exports=require("net")},92430:(e,r,t)=>{t.d(r,{O:()=>o,a:()=>a});var s=t(31825);let a=(0,s.Ik)({email:(0,s.Yj)().email("Invalid email address.").transform(e=>e.toLowerCase().replace(/\+.*(?=@)/,"")),password:(0,s.Yj)().min(1,"Password is required").max(32,"Entered password is too long")}),o=(0,s.Ik)({firstName:(0,s.Yj)().min(1,"First name is required.").max(48,"First name must be less than 48 characters."),lastName:(0,s.Yj)().max(48,"Last name must be less than 48 characters.").optional(),email:(0,s.Yj)().email("Invalid email address.").transform(e=>e.toLowerCase().replace(/\+.*(?=@)/,"")),password:(0,s.Yj)().min(1,"Please enter a password.").min(8,"Password must be at least 8 characters long.").max(32,"Password must be less than 32 characters long.").regex(/[A-Z]/,"Password must contain at least one uppercase letter.").regex(/[a-z]/,"Password must contain at least one lowercase letter.").regex(/\d/,"Password must contain at least one number.").regex(/[!@#$%^&*(),.?":{}|<>]/,"Password must contain at least one special character."),confirmPassword:(0,s.Yj)(),isVerified:(0,s.zM)().optional().default(!1),profilePic:(0,s.Yj)().url("Invalid URL.").optional().nullable(),balance:(0,s.ai)().optional().default(0),referredBy:(0,s.Yj)().optional().nullable()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]})},94735:e=>{e.exports=require("events")},98856:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>j,routeModule:()=>h,serverHooks:()=>P,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>w,checkRateLimit:()=>x});var a=t(53358),o=t(24967),n=t(47614),i=t(8527),p=t(9913),u=t(54155),l=t(92430),d=t(15566),c=t(64463),m=t(68363);async function x(e){return!0}async function w(e){try{let r=await e.json(),{firstName:t,lastName:s,email:a,password:o,isVerified:n,profilePic:x,balance:w,referredBy:h}=await l.O.parseAsync(r);await (0,p.A)();let f=await m.A.findOne({email:a});if(console.log("SignUpOtp of body: ",r.otp),!f)return i.NextResponse.json({error:"Somthing Wrong! Please Refresh the page and try again."},{status:400});if(f.totalInputTries>=5)return i.NextResponse.json({error:"Too many failed attempts. Please resend otp and try again.",errorPath:"otp"},{status:429});if(f.totalInputTries+=1,f.otp!==r.otp)return await f.save(),i.NextResponse.json({error:"Invalid OTP",errorPath:"otp"},{status:400});if(await u.A.findOne({email:a}))return i.NextResponse.json({error:"Email is already in use.",errorPath:"otp"},{status:400});let g=await (0,d.tW)(o,10),P=await (0,c.J)(10),j=new u.A({firstName:t,lastName:s||null,email:a,password:g,isVerified:n,profilePic:x,balance:w,referredBy:h||null,userId:P});return await j.save(),await f.deleteOne(),i.NextResponse.json({message:"User registered successfully!"},{status:201})}catch(e){if(console.error(e),"ZodError"===e.name)return i.NextResponse.json({error:e.errors[0].message,errorPath:"otp"},{status:400});return i.NextResponse.json({error:"Something went wrong."},{status:500})}}t(14294);let h=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/signup/route",pathname:"/api/signup",filename:"route",bundlePath:"app/api/signup/route"},resolvedPagePath:"C:\\Users\\subha\\Projects\\Anix7 Workspace\\apps\\tools\\app\\api\\signup\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:g,serverHooks:P}=h;function j(){return(0,n.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[7614,3532,7792,5027,7202],()=>t(98856));module.exports=s})();