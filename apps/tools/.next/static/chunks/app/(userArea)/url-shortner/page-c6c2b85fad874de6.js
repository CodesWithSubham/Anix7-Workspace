(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2784],{389:(e,a,l)=>{"use strict";l.d(a,{default:()=>g});var s=l(5942),t=l(4166),r=l(9361),n=l(5002);let i=(0,n.createServerReference)("40e45cbe5f5568a03755cf465e4f570d0b642eef3b",n.callServer,void 0,n.findSourceMapURL,"checkAlias"),o=(0,n.createServerReference)("40c7f15167e396b47068d33d2c4fdff22b0a83c7ce",n.callServer,void 0,n.findSourceMapURL,"createShortUrl");function d(e){let{className:a="",...l}=e;return(0,s.jsxs)("svg",{viewBox:"0 0 64 64",className:a,xmlns:"http://www.w3.org/2000/svg",...l,children:[(0,s.jsx)("path",{d:"M53 20H11a1 1 0 0 1-1-1v-2a5 5 0 0 1 5-5h34a5 5 0 0 1 5 5v2a1 1 0 0 1-1 1Zm-41-2h40v-1a3 3 0 0 0-3-3H15a3 3 0 0 0-3 3Z"}),(0,s.jsx)("path",{d:"M40 14H24a1 1 0 0 1-1-1v-1a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v1a1 1 0 0 1-1 1Zm-15-2h14a3 3 0 0 0-3-3h-8a3 3 0 0 0-3 3Zm14 38h-.2a1 1 0 0 1-.8-1.2L41 31a1 1 0 1 1 2 .3l-3 17.9a1 1 0 0 1-1 .8Zm-14 0a1 1 0 0 1-1-.8l-3-18a1 1 0 1 1 2-.2l3 17.9a1 1 0 0 1-.8 1.1Z",className:"svgC"}),(0,s.jsx)("path",{d:"M41.6 57H22.4a5 5 0 0 1-5-4.2L13 24.2a1 1 0 0 1 1-1.2h36a1 1 0 0 1 1 1.1l-4.5 28.7a5 5 0 0 1-5 4.2ZM15.2 25l4.3 27.5a3 3 0 0 0 3 2.5h19a3 3 0 0 0 3-2.5L48.9 25Z"}),(0,s.jsx)("path",{d:"M32 50a1 1 0 0 1-1-1V31a1 1 0 0 1 2 0v18a1 1 0 0 1-1 1Z",className:"svgC"})]})}var c=l(5288),h=l(3972),u=l(6363),x=l(4697),m=l(3341);function v(e){let{urls:a,setUrls:l,total:n,setTotal:i}=e,{data:o}=(0,m.wV)(),[v,p]=(0,t.useState)(0),[f,b]=(0,t.useState)(""),[g,j]=(0,t.useState)(!1),[w,y]=(0,t.useState)(!1),S=(0,t.useRef)(new Set);(0,t.useEffect)(()=>{(async e=>{if(!S.current.has(e)){S.current.add(e),j(!0);try{let a=await fetch("/api/tools/URLShortener/getByUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e})}),s=await a.json();if(null==s?void 0:s.success){let e=s.results;l(a=>[...a,...e.urls]),i(e.totalUrlsCount),b(e.BASE_URL)}else r.oR.error("Something went wrong!")}catch(e){r.oR.error("Failed to fetch URLs."),console.error(e)}finally{j(!1)}}})(v)},[v,i,l]);let N=async(e,a)=>{y(!0);try{let s=await fetch("/api/tools/URLShortener/modifyAds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alias:e,ad:a})}),t=await s.json();(null==t?void 0:t.success)?(l(l=>l.map(l=>l.alias===e?{...l,adsLabel:a}:l)),r.oR.success(t.message||"Waiting updated successfully")):r.oR.error(t.message||"Something went wrong!")}catch(e){r.oR.error("Failed to update waiting."),console.error(e)}finally{y(!1)}},[k,C]=(0,t.useState)(!1),[L,U]=(0,t.useState)(null),[R,M]=(0,t.useState)(!1),O=e=>{U(e),C(!0)},P=()=>{C(!1),U(null)},A=async()=>{if(L)try{let e=await fetch("/api/tools/URLShortener/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({alias:L.alias})}),a=await e.json();(null==a?void 0:a.success)?(r.oR.success(a.message),l(e=>e.filter(e=>e.alias!==L.alias)),i(e=>--e)):r.oR.warn(a.message||"Failed to delete URL.")}catch(e){r.oR.error("Error deleting URL."),console.error(e)}finally{M(!1),P()}},[Z,E]=(0,t.useState)(!1),[H,F]=(0,t.useState)(!1),V=e=>{U(e),E(!0)},B=async()=>{if(L)return r.oR.info("Edit Avalable Soon")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h2",{children:["My Shorted URLs (",(0,s.jsx)("span",{children:n}),")"]}),(null==a?void 0:a.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("table",{className:"urlCards my-2 w-full border-collapse text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:" border border-black",children:"Urls"}),(0,s.jsxs)("th",{className:" border border-black",children:["Waiting",(0,s.jsx)("span",{className:"text-xs",children:"*"})]}),(0,s.jsx)("th",{className:" border border-black",children:"Action"})]})}),(0,s.jsx)("tbody",{children:null==a?void 0:a.map(e=>{var a,l;return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"w-1/2 pt-2 border border-black",children:[(0,s.jsxs)("div",{className:"py-4 w-11/12 mx-auto relative",children:[(0,s.jsx)("label",{className:"text-xs text-(--linkC) absolute top-0 left-1",children:"Orginal Url"}),(0,s.jsx)("input",{className:"border border-dotted border-(--linkC) w-full bg-transparent outline-hidden py-1 pl-2 pr-7 rounded-full",readOnly:!0,value:e.longUrl}),(0,s.jsxs)("svg",{viewBox:"0 0 20 20",className:"absolute right-1 top-1/2 -translate-y-1/2 cursor-pointer hover:scale-110 transition-all duration-300",onClick:()=>window.open(e.longUrl,"_blank"),children:[(0,s.jsx)("path",{d:"M3 6.25C3 4.45 4.46 3 6.25 3H14c1.8 0 3.25 1.46 3.25 3.25v2a.75.75 0 0 1-1.5 0v-2c0-.97-.78-1.75-1.75-1.75H6.25c-.97 0-1.75.78-1.75 1.75v7.5c0 .97.78 1.75 1.75 1.75h4a.75.75 0 0 1 0 1.5h-4A3.25 3.25 0 0 1 3 13.75v-7.5Z"}),(0,s.jsx)("path",{d:"M8 8.75c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-2.69l5.22 5.22a.75.75 0 1 1-1.06 1.06L9.5 10.56v2.69a.75.75 0 0 1-1.5 0v-4.5Z",className:"svgC"})]})]}),(0,s.jsxs)("div",{className:"py-4 w-11/12 mx-auto relative",children:[(0,s.jsx)("label",{className:"text-xs text-(--linkC) absolute top-0 left-1",children:"Short Url"}),(0,s.jsx)("input",{className:"border border-dotted border-(--linkC) w-full bg-transparent outline-hidden py-1 pl-2 pr-7 rounded-full",readOnly:!0,value:f+"/"+e.alias}),(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:"absolute right-1 top-1/2 -translate-y-1/2 cursor-pointer hover:scale-110 transition-all duration-300",onClick:()=>copyToClipboard(f+"/"+e.alias),children:(0,s.jsx)("path",{className:"svgC",d:"M16 20H8a3 3 0 0 1-3-3V7a1 1 0 0 0-2 0v10a5 5 0 0 0 5 5h8a1 1 0 0 0 0-2Zm5-11.06a1.31 1.31 0 0 0-.06-.27v-.09a1.07 1.07 0 0 0-.19-.28l-6-6a1.07 1.07 0 0 0-.28-.19h-.09L14.06 2H10a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8.94Zm-6-3.53L17.59 8H16a1 1 0 0 1-1-1ZM19 15a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3v3a3 3 0 0 0 3 3h3Z"})})]})]}),(0,s.jsx)("td",{className:"p-2 border border-black",children:(0,s.jsx)("div",{className:"flex flex-col justify-around items-start gap-0.5 disabled:*:opacity-70 min-h-24",children:((null==o||null==(a=o.user)?void 0:a.role)==="admin"||(null==o||null==(l=o.user)?void 0:l.role)==="owner"?["None","Low","Mid","High"]:["Off","On"]).map((a,l)=>(0,s.jsxs)("button",{disabled:w,onClick:()=>N(e.alias,l),className:"cursor-pointer",children:[(0,s.jsx)("span",{className:"w-4 h-4 rounded-full mr-[6px] inline-block border-[3.5px] border-(--waveB) outline outline-(--linkC) ".concat(e.adsLabel===l?"bg-(--linkC)":"bg-(--waveB)")}),(0,s.jsx)("span",{children:a})]},l))})}),(0,s.jsx)("td",{className:" border border-black",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2 m-2 *:rounded-full",children:[(0,s.jsx)(u.$,{onClick:()=>V(e),children:"Edit"}),(0,s.jsx)(u.$,{className:"bg-red-500",onClick:()=>O(e),children:"Delete"})]})})]},e.alias)})})]}),n>a.length&&(0,s.jsx)("button",{className:"block w-1/2 max-w-96 bg-(--linkC) p-3 mx-auto rounded-full text-white font-bold disabled:opacity-80 disabled:cursor-not-allowed enabled:hover:scale-105 transition-all duration-300",onClick:()=>p(e=>++e),disabled:g,children:g?"Loading...":"Load More"})]}):(0,s.jsx)("div",{children:"You have no shortened URLs"}),!!a.length&&(0,s.jsx)("div",{className:"mt-6 mb-14 text-xs text-gray-600",children:"* Waiting time is the 3-second delay before the URL redirects to the original URL."}),k&&L&&(0,s.jsxs)(h.PopUpBox,{header:"Are you sure you want to delete?",svg:(0,s.jsx)(d,{}),children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:"Original URL:"})," ",L.longUrl]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:"Shortened URL:"})," ",f+"/"+L.alias]}),(0,s.jsxs)("div",{className:"flex justify-end items-center text-white font-bold mt-5",children:[(0,s.jsx)(u.$,{className:"bg-red-600 hover:scale-105",onClick:A,disabled:R,children:R?"Deleting...":"Delete"}),(0,s.jsx)(u.$,{className:"bg-(--linkC) hover:scale-105 mx-3",onClick:P,disabled:R,children:"Cancel"})]})]}),Z&&L&&(0,s.jsxs)(h.PopUpBox,{closeable:!0,header:"Edit URL",onClose:()=>{E(!1),U(null)},svg:(0,s.jsx)(c.Y,{}),children:[(0,s.jsxs)("div",{className:"flex flex-col mb-5 px-2",children:[(0,s.jsx)("label",{htmlFor:"editShortedUrl",className:"text-(--linkC) text-xs ml-1",children:"Shorted URL"}),(0,s.jsx)(x.pd,{type:"url",readOnly:!0,defaultValue:f+"/"+L.alias,className:"mb-3"}),(0,s.jsx)("label",{htmlFor:"editOrgUrl",className:"text-(--linkC) text-xs ml-1",children:"Orginal URL"}),(0,s.jsx)(x.pd,{type:"url",id:"editOrgUrl",defaultValue:L.longUrl})]}),(0,s.jsx)("div",{className:"flex justify-end items-center text-white font-bold mb-px mr-1",children:(0,s.jsx)(u.$,{onClick:B,loading:H,loadingText:"Saving...",children:"Save"})})]})]})}var p=l(5026);function f(e){let{children:a,className:l="",...t}=e;return(0,s.jsx)("p",{className:(0,p.QP)("text-red-500 font-semibold text-xs text-left -mt-1 ml-2 mb-2",l),children:a})}var b=l(1045);function g(){let[e,a]=(0,t.useState)(""),[l,n]=(0,t.useState)(""),[d,c]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[j,w]=(0,t.useState)(""),[y,S]=(0,t.useState)(""),[N,k]=(0,t.useState)(!1),[C,L]=(0,t.useState)(""),[U,R]=(0,t.useState)([]),[M,O]=(0,t.useState)(0),P=async e=>{let a=e.target.value.trim();if(w(""),S(""),0!==a.length){if(!/^[a-zA-Z0-9]+$/.test(a))return void S("Alias must contain only letters and numbers.");if(6!==a.length)return void S("Alias must be 6 characters long.");try{var l;k(!0);let e=await i({alias:a});if(!e.success)return void S(e.message||"Failed to check alias.");(null==(l=e.data)?void 0:l.available)?w(a):S(e.message||"Alias is already taken.")}catch(e){console.error("Error checking alias:",e),S("Something went wrong. Please try again.")}finally{k(!1)}}},A=e=>{let l=e.target.value.trim();if(n(""),a(""),l.startsWith("http://"))return void n("Only HTTPS URLs are allowed.");/^(https:\/\/)((?!localhost)[\w.-]+)\.([a-z]{2,})(:\d{1,5})?(\/.*)?$/i.test(l)?a(l):n("Invalid URL")},Z=async()=>{c(!0);try{let l=await o({longUrl:e,alias:j});if(!l.success)return void n(l.message||"Failed to shorten URL");let{data:s}=l;s?(s.isNew&&(R(e=>[s,...e]),O(e=>e+1)),L(s.shortUrl),a(""),w(""),g(!1)):r.oR.error("Something went wrong! Please try again later.")}catch(e){r.oR.error("Unexpected error occurred."),console.error(e)}finally{c(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h.WorkBox,{className:"border max-w-lg my-5",children:[(0,s.jsx)("h2",{className:"mb-5",children:"URL Shortener"}),C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.e2,{value:C}),(0,s.jsx)(u.$,{onClick:()=>L(""),children:"Generate New"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.pd,{type:"url",placeholder:"Enter Long URL",autoComplete:"off",onChange:e=>A(e)}),(0,s.jsx)(f,{children:l}),(0,s.jsx)("button",{className:"my-2 text-(--linkC) font-bold cursor-pointer",onClick:()=>g(!m),children:m?"- Remove Alias":"+ Add Alias"}),(0,s.jsxs)("div",{className:(0,p.QP)("relative opacity-0 transition-all duration-500",m?"max-h-screen opacity-100":"max-h-0 overflow-hidden"),children:[(0,s.jsx)(x.pd,{type:"text",placeholder:"Enter 6 characters",autoComplete:"off",onChange:P,maxLength:6}),(0,s.jsx)("span",{className:"absolute top-1/2 right-3 -translate-y-1/2 text-green-600 font-bold",children:j?"Avalable ✓":N&&(0,s.jsx)(b.x,{})}),(0,s.jsx)(f,{children:y})]}),(0,s.jsx)("div",{className:"flex justify-end w-full",children:(0,s.jsx)(u.$,{type:"submit",className:"w-1/3",disabled:m&&(!j||y)||!e||l||d,onClick:Z,loading:d,children:"Submit"})})]})]}),(0,s.jsx)(v,{urls:U,setUrls:R,total:M,setTotal:O})]})}},3893:(e,a,l)=>{"use strict";l.d(a,{IfLoggedIn:()=>r,IfLoggedOut:()=>n});var s=l(5942),t=l(3341);function r(e){let{children:a}=e,{data:l,status:r}=(0,t.wV)();return"loading"!==r&&l?(0,s.jsx)(s.Fragment,{children:a}):null}function n(e){let{children:a}=e,{data:l,status:r}=(0,t.wV)();return"loading"===r||l?null:(0,s.jsx)(s.Fragment,{children:a})}},5002:(e,a,l)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var l in a)Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}(a,{callServer:function(){return s.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return t.findSourceMapURL}});let s=l(2874),t=l(8085),r=l(8202).createServerReference},5094:(e,a,l)=>{Promise.resolve().then(l.bind(l,389)),Promise.resolve().then(l.t.bind(l,535,23)),Promise.resolve().then(l.t.bind(l,6912,23)),Promise.resolve().then(l.bind(l,3893)),Promise.resolve().then(l.bind(l,3972))},5288:(e,a,l)=>{"use strict";l.d(a,{Y:()=>r,f:()=>n});var s=l(5942),t=l(5026);function r(e){let{className:a="",...l}=e;return(0,s.jsxs)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",className:a,xmlns:"http://www.w3.org/2000/svg",...l,children:[(0,s.jsx)("path",{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z"}),(0,s.jsx)("path",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 56v120a32 32 0 0 0 32 32h120m-232 80h160m-160 80h160"})]})}function n(e){let{className:a="",...l}=e;return(0,s.jsxs)("svg",{version:"1.1",viewBox:"0 0 32 32",className:(0,t.QP)("line",a),xmlns:"http://www.w3.org/2000/svg",...l,children:[(0,s.jsx)("path",{d:"M22.2 2.9v11.4h-.3l-4.5.7v7c0 2.8 1.6 6.4 4 8.1l.2.2c-.3.4-.8.6-1.4.6H2.9A2 2 0 0 1 1 29V3c0-1.1.8-2 1.9-2h17.4c1 0 1.9.9 1.9 1.9zM3.8 5.1h6m-6 4.3h10.7M3.8 13.7h10.7m.1 4.3H3.8m10.8 4.3H3.8m-.2 4.3h11"}),(0,s.jsx)("path",{className:"svgC",d:"M31 15v7c0 3.8-3.1 9-6.8 9a5 5 0 0 1-2.8-1c-2.4-1.7-4-5.2-4-8.1V15l4.4-.7L24 14l7 1z"}),(0,s.jsx)("path",{d:"m21.3 23.3 1.4 1.4 4.4-4.4"})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[535,6912,5026,9361,3341,90,3449,2681,7358],()=>a(5094)),_N_E=e.O()}]);