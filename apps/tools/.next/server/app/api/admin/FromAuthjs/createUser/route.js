(()=>{var e={};e.id=433,e.ids=[433],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9913:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});var s=t(56037);let o=process.env.MONGODB_URI,n=process.env.MONGODB_NAME;if(!o)throw Error("❌ MONGODB_URI is not defined in environment variables.");let a=global.mongoose||{conn:null,promise:null},i=async()=>(a.conn||(a.promise||(console.log("\uD83D\uDD04 Connecting to MongoDB..."),a.promise=s.connect(o,{dbName:n,maxPoolSize:10,serverSelectionTimeoutMS:8e3,socketTimeoutMS:45e3,retryWrites:!0,waitQueueTimeoutMS:5e3,bufferCommands:!1}).then(e=>(console.log("✅ Connected to MongoDB!"),e)).catch(e=>{throw console.error("❌ MongoDB Connection Error:",e),Error("MongoDB connection failed.")})),a.conn=await a.promise),a.conn);global.mongoose=a;let u=i},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15946:()=>{},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},38771:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>m,serverHooks:()=>h,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{POST:()=>d});var o=t(53358),n=t(24967),a=t(47614),i=t(9913),u=t(64463),c=t(54155),l=t(8527);let p=process.env.AUTH_SECRET;async function d(e,r){try{let r=e.headers.get("Authorization")?.split(" ")[1];if(!r)return l.NextResponse.json({success:!1,message:"Admin token is required"},{status:403});if(r!==p)return l.NextResponse.json({success:!1,message:"Unauthorized"},{status:403});let{firstName:t,lastName:s,email:o,isVerified:n,profilePic:a,referredBy:d}=(await e.json()).userDetails;if(!t||!o)return l.NextResponse.json({success:!1,message:"Missing required user fields"},{status:400});let m=await (0,u.J)(10);await (0,i.A)();let g=new c.A({firstName:t,lastName:s,email:o,password:null,isVerified:n,profilePic:a,referredBy:d,userId:m});return await g.save(),l.NextResponse.json({success:!0,message:"User created successfully"},{status:201})}catch(e){return console.error(e),l.NextResponse.json({success:!1,message:e.message||"Internal server error"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin/FromAuthjs/createUser/route",pathname:"/api/admin/FromAuthjs/createUser",filename:"route",bundlePath:"app/api/admin/FromAuthjs/createUser/route"},resolvedPagePath:"C:\\Users\\subha\\Projects\\Anix7 Workspace\\apps\\tools\\app\\api\\admin\\FromAuthjs\\createUser\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:f,serverHooks:h}=m;function x(){return(0,a.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:f})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54155:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(56037);let o=new s.Schema({_id:{type:s.Schema.Types.ObjectId,auto:!0},userId:{type:Number,unique:!0,required:!0},firstName:{type:String,required:!0},lastName:{type:String,default:null},email:{type:String,required:!0,unique:!0,lowercase:!0},password:{type:String,default:null},isVerified:{type:Boolean,default:!1},profilePic:{type:String,default:null},balance:{type:Number,default:0},referredBy:{type:Number,default:null}},{timestamps:!0}),n=s.models?.User||(0,s.model)("User",o)},55698:()=>{},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64463:(e,r,t)=>{"use strict";t.d(r,{J:()=>n});var s=t(54155),o=t(9913);async function n(e=10){let r,t=!0,a=Math.pow(10,e-1),i=Math.pow(10,e)-1;for(await (0,o.A)();t;)r=Math.floor(a+Math.random()*(i-a)),t=await s.A.exists({userId:r});return r}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[7614,3532],()=>t(38771));module.exports=s})();